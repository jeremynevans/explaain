<li class="card card-{{card.id}}" style="margin-top: {{$index*10}}px; margin-left: {{$index*5}}px;">
    <i class="material-icons action-icon close" ng-click="close(card)">close</i>
    <i class="material-icons action-icon edit" ng-show="editMode" ng-click="toggleEditCard(card)">create</i>
    <i class="material-icons action-icon delete" ng-show="editMode" ng-click="deleteCard(card.$id, card)">delete</i>
    <div class="display-fields" ng-hide="localCardRefs[card.$id].editing">
        <div class="header">
            <div class="header-image">
                <img class="image" ng-src="{{ card.image.value || 'https://static.licdn.com/scds/common/u/images/themes/katy/ghosts/person/ghost_person_80x80_v1.png' }}" />
            </div>
            <div class="header-text">
                <h3>{{ card.title }}</h3>
                <h4>{{ card.subtitle }}</h4>
            </div>
        </div>
        <ng-bio></ng-bio>
    </div>
    <div class="editing-fields" ng-show="localCardRefs[card.$id].editing">
        <form name="editCardForm">
            <div layout layout-sm="column">
                <md-input-container flex="50">
                    <label>Title</label>
                    <input ng-model="card.title">
                </md-input-container>
                <md-input-container>
                    <md-button class="md-raised md-primary" ng-click="populateFromWikipedia(card, true)">Populate from Wikipedia</md-button>
                </md-input-container>
                <md-input-container flex> </md-input-container>
            </div>
            <div layout layout-sm="column">
                <md-input-container flex="50">
                    <label>Subtitle</label>
                    <input ng-model="card.subtitle">
                </md-input-container>
                <md-input-container flex="50">
                    <label>Image URL</label>
                    <input ng-model="card.image.value">
                </md-input-container>
            </div>
            <div layout layout-sm="column">
                <md-input-container flex>
                    <label>Bio</label>
                    <textarea ng-model="card.bio.value" columns="1" md-maxlength="450"></textarea>
                </md-input-container>
            </div>
            <div layout layout-sm="column">
                <md-chips ng-model="localCardRefs[card.$id].keywords" placeholder="Enter a new keyword" delete-button-label="Remove Keyword" delete-hint="Press delete to remove keyword" secondary-placeholder="+Keyword" md-on-append="appendKeyword($chip, card)">
                    <md-chip-template> {{$chip.keyword}} </md-chip-template>
                    <button md-chip-remove class="md-chip-remove ng-scope" ng-click="deleteKeyword($chip.$id)"><md-icon md-svg-icon="md-close" class="ng-isolate-scope md-default-theme" aria-hidden="true"></md-icon></button>
                </md-chips>
            </div>
            <div layout layout-sm="column">
                <md-input-container>
                    <md-button class="md-raised md-primary" ng-click="updateCard(card.$id, card)">Update</md-button>
                </md-input-container>
                <md-input-container flex> </md-input-container>
                <md-input-container>
                    <md-button class="md-raised md-warn" ng-click="deleteCard(card.$id, card)">Delete</md-button>
                </md-input-container>
            </div>
        </form>
    </div>
</li>